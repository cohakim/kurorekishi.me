version: 1
task_definition:
  ecs_network_mode: bridge
  task_execution_role: ecsTaskExecutionRole
  task_size:
    cpu_limit: 384
  services:
    backend:
      essential: true
      cpu_shares: 384
      mem_limit: 3072m
      mem_reservation: 3072m
      healthcheck:
        test: "ps ax | grep -v grep | grep sidekiq > /dev/null"
        interval: 5s
        timeout: 5s
        retries: 10
        start_period: 10s
